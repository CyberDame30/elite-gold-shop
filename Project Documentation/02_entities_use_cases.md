1. Основні сутності

MetalQuote:
Опис - Зберігає поточні котирування золота
Основні поля - id, source, currency, pricePerGram, fetchedAt

PricingRule:
Опис - Формула розрахунку ціни
Основні поля - id, markup, laborCost, formula, currency

Product:
Опис - Ювелірний виріб
Основні поля - id, sku, title, weight, purity, categoryId, priceId, images[]

Category:
Опис - Тип товару
Основні поля - id, name, slug, parentId

PriceRecord:
Опис - Історія цін
Основні поля - id, productId, price, calculatedAt, quoteId


User:
Опис - Обліковий запис
Основні поля - id, name, email, passwordHash, role

Order:
Опис - Замовлення користувача
Основні поля - id, userId, total, status, createdAt

AuditLog:
Опис - Логування змін
Основні поля - id, actorId, action, timestamp, before, after



2. Use‑Cases (UC)
UC‑01: Оновлення котирувань золота

Актор: Система (cron‑job)

Отримує поточну ціну XAU/USD через API.

Зберігає у таблиці MetalQuote.

Тригерить перерахунок усіх цін.

UC‑02: Перерахунок ціни товару

Актор: Система

Використовує формулу з PricingRule.

Розраховує нову ціну для кожного Product.

Записує в PriceRecord.

UC‑03: Перегляд каталогу користувачем

Актор: Користувач

Переглядає список товарів з актуальними цінами.

Фільтрує за пробою, вагою, категорією.

Додає товар у кошик.

UC‑04: Оформлення замовлення

Актор: Користувач

Додає товари у кошик.

Підтверджує замовлення.

Ціна фіксується станом на момент покупки.

UC‑05: Управління правилами ціноутворення

Актор: Адміністратор

Створює або редагує PricingRule.

Вносить зміни у формулу, маржу, роботу майстра.

Усі дії логуються у AuditLog.

UC‑06: Перегляд сертифікатів

Актор: Користувач

Відкриває деталі товару.

Завантажує PDF‑сертифікат справжності.